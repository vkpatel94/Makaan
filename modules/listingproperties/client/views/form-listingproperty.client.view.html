<section>
  <div class="page-header">
    <h1>{{vm.listingproperty._id ? 'Edit Property Listing' : 'New Property Listing'}}</h1>
  </div>
  <div class="col-md-12">
    <form name="vm.form.listingpropertyForm" class="form-horizontal" ng-submit="vm.save(vm.form.listingpropertyForm.$valid)" novalidate>
      <fieldset>
        <div class="form-group" show-errors>
         <label class="control-label" for="name">Name</label>
          <input name="name" type="text" ng-model="vm.listingproperty.name" id="name" class="form-control" placeholder="Name" required>
          <div ng-messages="vm.form.listingpropertyForm.name.$error" role="alert">
            <p class="help-block error-text" ng-message="required">property name is required.</p>
          </div>
        </div>
        <div class="form-group">
            <label class="control-label" for="address">Address</label>
            <input name="Address" type="text" ng-model="vm.listingproperty.address" id="address" class="form-control" placeholder="Enter Address" required>
            <div ng-messages="vm.form.listingpropertyForm.address.$error" role="alert">
              <p class="help-block error-text" ng-message="required">property Address is required.</p>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label" for="city">city</label>
            <input name="prcityice" type="text"  ng-model="vm.listingproperty.city" id="city" class="form-control" placeholder="Enter city" required>
            <div ng-messages="vm.form.listingpropertyForm.city.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Price required.</p>
              </div>
        </div>

        <div class="form-group">
          <label class="control-label" for="contactnumber" >Contact Number</label>
          <input name="contactnumber" type="number" pattern="^\d+$" ng-model="vm.listingproperty.contactnumber" id="contactnumber" class="form-control" placeholder="Enter Phone Number" required>
          <div ng-messages="vm.form.listingpropertyForm.contactnumber.$error" role="alert">
            <p class="help-block error-text" ng-message="required">Number required.</p>
          </div>
        </div>

        <div class="form-group">
            <label class="control-label" for="unit">Unit number</label>
            <input name="unit" type="text" ng-model="vm.listingproperty.unit" id="unit" class="form-control" placeholder="Enter Unit #" required>
            <div ng-messages="vm.form.listingpropertyForm.unit.$error" role="alert">
              <p class="help-block error-text" ng-message="required">property unit is required.</p>
            </div>
        </div>

        <div class="form-group">
          <label class="control-label" for="email">Email</label>
          <input name="email" type="text" ng-model="vm.listingproperty.email" id="email" class="form-control" placeholder="Enter your Email" required>
          <div ng-messages="vm.form.listingpropertyForm.email.$error" role="alert">
            <p class="help-block error-text" ng-message="required">property unit is required.</p>
          </div>
        </div>

        <div class="form-group">
          <label class="control-label" for="noofbedroom" >Number of bedrooms</label>
          <input name="noofbedroom" type="number" pattern="^\d+$" ng-model="vm.listingproperty.noofbedroom" id="noofbedroom" class="form-control" placeholder="Enter number of bedrooms" required>
          <div ng-messages="vm.form.listingpropertyForm.noofbedroom.$error" role="alert">
              <p class="help-block error-text" ng-message="required">Number of bedrooms is required.</p>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label" for="propertydescription">Property description</label>
            <textarea name="propertydescription" data-ng-model="vm.listingproperty.propertydescription" id="propertydescription" class="form-control" cols="30" rows="10" placeholder="Enter Property Description"></textarea>
          </div>

        <div class="form-group">
            <label class="control-label" for="price" >Price</label>
            <input name="price" type="number" pattern="^\d+$" ng-model="vm.listingproperty.price" id="price" class="form-control" placeholder="Enter Price" required>
            <div ng-messages="vm.form.listingpropertyForm.price.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Price required.</p>
              </div>
          </div>
          <div class="form-group">
            <label class="control-label" for="content">Latitude</label>
                    <div class="controls">
                            <textarea name="lat" ng-model="vm.listingproperty.lat" id="lat" class="form-control" cols="10" rows="1" placeholder="Enter Latitude"></textarea>
                    </div>
                    </div>
    <!-- lon -->
    <div class="form-group">
            <label class="control-label" for="content">Longitude</label>
                    <div class="controls">
                            <textarea name="lon" ng-model="vm.listingproperty.lon" id="lon" class="form-control" cols="10" rows="1" placeholder="Longitude"></textarea>
                    </div>
    </div>
    <div class="form-group">
      <label class="control-label" for="content">Upload Property Pictures</label>
    </div>
  
    <!-- proprty photos -->
    
    <section class="row">
      <div class="col-xs-offset-1 col-xs-10 col-md-offset-3 col-md-4">
        <form class="signin form-horizontal">
          <fieldset>
            <div class="form-group text-center">
              <img ngf-src="vm.fileSelected ? picFile : '/' + vm.listingproperty.propertyImageURL" alt="{{vm.listingproperty.name}}" class="img-thumbnail property-picture" ngf-drop>
            </div>
            <div ng-show="vm.loading" class="form-group text-center">
              <img ng-src="/modules/core/client/img/loaders/loader.gif" height="50" width="50" alt="Loading image...">
            </div>
            <div ng-show="!vm.fileSelected" class="text-center form-group">
              <button class="btn btn-default btn-file" ngf-select="(vm.fileSelected = true) && (vm.loading = false)" ng-model="picFile" accept="image/*" ngf-before-model-change="vm.loading = true" ngf-resize="{width: 400}" ngf-resize-if="$width > 400 || $height > 400">Select Picture</button>
            </div>
            <div ng-show="vm.fileSelected" class="text-center form-group">
              <button class="btn btn-primary" ng-click="vm.upload(picFile)" >Use This Picture</button>
              <button class="btn btn-default" ng-click="vm.fileSelected = false">Cancel</button>
            </div>
            <div ng-show="vm.fileSelected" class="progress text-center">
              <div class="progress-bar" role="progressbar" aria-valuenow="{{vm.progress}}" aria-valuemin="0" aria-valuemax="100" style="width:{{vm.progress}}%" ng-bind="vm.progress + '%'">
                <span class="sr-only">{{vm.progress}}% Complete</span>
              </div>
            </div>
          </fieldset>
        </form>
      </div>
    </section>

        <div class="form-group">
          <button type="submit" class="btn btn-default">{{vm.listingproperty._id ? 'Update' : 'Create'}}</button>
        </div>

        <div ng-show="vm.error" class="text-danger">
          <strong ng-bind="vm.error"></strong>
        </div>
      </fieldset>
    </form>
  </div>
</section>
